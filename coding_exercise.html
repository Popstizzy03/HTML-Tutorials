<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive HTML Code Completion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white dark:bg-gray-900 min-h-screen">
    <!-- Dark mode detection -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">HTML Code Completion</h1>
            <p class="text-gray-600 dark:text-gray-300">Complete the missing HTML code elements</p>
        </div>

        <!-- Progress Bar -->
        <div class="mb-8">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-gray-600 dark:text-gray-300">Progress</span>
                <span class="text-sm text-gray-600 dark:text-gray-300" id="progress-text">Lesson 1 of 3</span>
            </div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                <div id="progress-bar" class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 33.33%"></div>
            </div>
        </div>

        <!-- Lesson Container -->
        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-4" id="lesson-title">Complete the code</h2>
            
            <!-- Code Block -->
            <div class="bg-gray-900 rounded-lg p-4 font-mono text-sm overflow-x-auto">
                <div id="code-content">
                    <!-- Dynamic content will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <button id="check-btn" class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-opacity-90 transition-colors font-medium text-base">
                Check Answers
            </button>
            <button id="next-btn" class="px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium text-base hidden">
                Next Lesson
            </button>
            <button id="reset-btn" class="px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium text-base">
                Reset
            </button>
        </div>

        <!-- Results Summary -->
        <div id="results" class="mt-6 hidden">
            <div class="bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-4">
                <h3 class="font-semibold text-gray-800 dark:text-white mb-2">Results:</h3>
                <div id="results-content" class="text-sm"></div>
            </div>
        </div>
    </div>

    <script>
        class HTMLLearningApp {
            constructor() {
                this.currentLesson = 0;
                this.lessons = [
                    {
                        title: "Complete the closing tags",
                        code: `&lt;h1&gt;Weather Forecast&lt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-16" data-answer="/h1" placeholder="?">&gt;
&lt;p&gt;Very sunny&lt;/p&gt;
&lt;img <input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-16" data-answer="src" placeholder="?">="sun.jpg"&gt;
&lt;button&gt;More Details&lt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-20" data-answer="/button" placeholder="?">&gt;`,
                        answers: ["/h1", "src", "/button"]
                    },
                    {
                        title: "Complete the missing elements",
                        code: `&lt;h1&gt;Weather Forecast&lt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-16" data-answer="/h1" placeholder="?">&gt;
&lt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-8" data-answer="p" placeholder="?">&gt;Very sunny&lt;/p&gt;
&lt;img <input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-16" data-answer="src" placeholder="?">="sun.jpg"&gt;
&lt;button&gt;More Details&lt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-20" data-answer="/button" placeholder="?">&gt;`,
                        answers: ["/h1", "p", "src", "/button"]
                    },
                    {
                        title: "Complete all missing parts",
                        code: `&lt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-10" data-answer="h1" placeholder="?">&gt;Weather Forecast&lt;/h1&gt;
&lt;p&gt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-24" data-answer="Very sunny" placeholder="?">&lt;/p&gt;
&lt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-12" data-answer="img" placeholder="?"> src="sun.jpg"&gt;
&lt;<input type="text" class="answer-input bg-gray-800 border border-gray-600 text-green-400 px-2 py-1 rounded text-xs w-16" data-answer="button" placeholder="?">&gt;More Details&lt;/button&gt;`,
                        answers: ["h1", "Very sunny", "img", "button"]
                    }
                ];
                
                this.init();
            }

            init() {
                this.loadLesson();
                this.bindEvents();
            }

            bindEvents() {
                document.getElementById('check-btn').addEventListener('click', () => this.checkAnswers());
                document.getElementById('next-btn').addEventListener('click', () => this.nextLesson());
                document.getElementById('reset-btn').addEventListener('click', () => this.resetLesson());
            }

            loadLesson() {
                const lesson = this.lessons[this.currentLesson];
                document.getElementById('lesson-title').textContent = lesson.title;
                document.getElementById('code-content').innerHTML = lesson.code;
                document.getElementById('progress-text').textContent = `Lesson ${this.currentLesson + 1} of ${this.lessons.length}`;
                
                const progressPercent = ((this.currentLesson + 1) / this.lessons.length) * 100;
                document.getElementById('progress-bar').style.width = `${progressPercent}%`;
                
                // Hide results and next button
                document.getElementById('results').classList.add('hidden');
                document.getElementById('next-btn').classList.add('hidden');
                document.getElementById('check-btn').classList.remove('hidden');
            }

            checkAnswers() {
                const inputs = document.querySelectorAll('.answer-input');
                const lesson = this.lessons[this.currentLesson];
                let correct = 0;
                let total = inputs.length;
                let results = [];

                inputs.forEach((input, index) => {
                    const userAnswer = input.value.trim();
                    const correctAnswer = input.dataset.answer;
                    const isCorrect = userAnswer.toLowerCase() === correctAnswer.toLowerCase();
                    
                    // Visual feedback
                    input.classList.remove('border-green-500', 'border-red-500', 'bg-green-900', 'bg-red-900');
                    if (isCorrect) {
                        input.classList.add('border-green-500', 'bg-green-900');
                        correct++;
                    } else {
                        input.classList.add('border-red-500', 'bg-red-900');
                    }

                    results.push({
                        index: index + 1,
                        userAnswer,
                        correctAnswer,
                        isCorrect
                    });
                });

                this.showResults(results, correct, total);
                
                if (correct === total) {
                    document.getElementById('check-btn').classList.add('hidden');
                    if (this.currentLesson < this.lessons.length - 1) {
                        document.getElementById('next-btn').classList.remove('hidden');
                    }
                }
            }

            showResults(results, correct, total) {
                const resultsDiv = document.getElementById('results');
                const resultsContent = document.getElementById('results-content');
                
                let html = `<div class="mb-2"><strong>Score: ${correct}/${total}</strong></div>`;
                
                results.forEach(result => {
                    const statusColor = result.isCorrect ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400';
                    const statusIcon = result.isCorrect ? '✓' : '✗';
                    
                    html += `
                        <div class="flex items-center gap-2 mb-1">
                            <span class="${statusColor}">${statusIcon}</span>
                            <span class="text-gray-600 dark:text-gray-300">Answer ${result.index}:</span>
                            <span class="font-mono text-xs">${result.userAnswer || '(empty)'}</span>
                            ${!result.isCorrect ? `<span class="text-gray-500">→ correct: ${result.correctAnswer}</span>` : ''}
                        </div>
                    `;
                });
                
                resultsContent.innerHTML = html;
                resultsDiv.classList.remove('hidden');
            }

            nextLesson() {
                if (this.currentLesson < this.lessons.length - 1) {
                    this.currentLesson++;
                    this.loadLesson();
                }
            }

            resetLesson() {
                const inputs = document.querySelectorAll('.answer-input');
                inputs.forEach(input => {
                    input.value = '';
                    input.classList.remove('border-green-500', 'border-red-500', 'bg-green-900', 'bg-red-900');
                });
                
                document.getElementById('results').classList.add('hidden');
                document.getElementById('next-btn').classList.add('hidden');
                document.getElementById('check-btn').classList.remove('hidden');
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new HTMLLearningApp();
        });
    </script>
</body>
</html>
